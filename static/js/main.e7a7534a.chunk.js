(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{102:function(e,t,a){},103:function(e,t,a){},119:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(10),c=a.n(o),l=(a(102),a(22)),i=a(23),s=a(28),u=a(24),m=a(29),h=a(44),p=a(16),d=(a(103),"nim-finder-token"),g="https://api.stya.net/nim",f=g+"/register",v=g+"/login",E=g+"/byname",b=g+"/byid",y=0,w=a(155),k=a(84),C=a(161),T=a(169),j=a(159),S=a(57),O=a.n(S),x=a(121),I=a(160),N=a(168),F=a(154),P=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(N.a,{mt:5},r.a.createElement(x.a,{variant:"body2",color:"textSecondary",align:"center"},"Made with love by ",r.a.createElement(F.a,{color:"inherit",href:"http://ugm.id/asif"},"Asif")," using ",r.a.createElement(F.a,{color:"inherit",href:"https://material-ui.com/"},"Material-UI")," components."))}}]),t}(r.a.PureComponent),B=a(4);var R=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={username:null,password:null,helperText:""},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"handleSubmit",value:function(){var e=this,t=this.props.setToken,a=this.state,n=a.username,r=a.password;this.setState({helperText:"Logging in..."}),function(e,t){var a={username:e,password:t};return fetch(v,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:Object.keys(a).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(a[e])}).join("&")}).then(function(e){return e.json()})}(n,r).then(function(a){var n=0===a.code;e.setState({helperText:n?"":a.status}),t(n?a.token:"")})}},{key:"renderTitle",value:function(){var e=this.props.classes;return r.a.createElement(r.a.Fragment,null,r.a.createElement(w.a,{className:e.avatar},r.a.createElement(O.a,null)),r.a.createElement(x.a,{component:"h1",variant:"h6"},"ITB NIM Finder"),r.a.createElement(x.a,{component:"h2",variant:"h4"},"Login"))}},{key:"renderForm",value:function(){var e=this,t=this.state.helperText,a=this.props.classes;return r.a.createElement(r.a.Fragment,null,r.a.createElement(T.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"username",label:"Username",name:"username",autoComplete:"username",autoFocus:!0,onChange:function(t){e.setState({username:t.target.value})},onKeyPress:function(t){"Enter"===t.key&&(e.handleSubmit(),t.preventDefault())}}),r.a.createElement(T.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:function(t){e.setState({password:t.target.value})},onKeyPress:function(t){"Enter"===t.key&&(e.handleSubmit(),t.preventDefault())},helperText:t}),r.a.createElement(k.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:a.submit,onClick:function(){return e.handleSubmit()}},"Login"),r.a.createElement(j.a,{container:!0,direction:"column",alignItems:"center"},r.a.createElement(j.a,{item:!0},r.a.createElement(h.b,{to:"/register"},"Haven't had an account yet? Register"))))}},{key:"render",value:function(){var e=this.props,t=e.classes;return(0,e.getToken)()?r.a.createElement(p.a,{to:"/"}):r.a.createElement(I.a,{component:"main",maxWidth:"xs"},r.a.createElement(C.a,null),r.a.createElement("div",{className:t.paper},this.renderTitle(),this.renderForm()),r.a.createElement(P,null))}}]),t}(r.a.Component),W=Object(B.a)(function(e){return{"@global":{body:{backgroundColor:e.palette.common.white}},paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.primary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})(R);var D=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={username:null,password:null,helperText:""},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"handleSubmit",value:function(){var e=this,t=this.state,a=t.username,n=t.password;this.setState({helperText:"Registering..."}),function(e,t){var a={username:e,password:t};return fetch(f,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:Object.keys(a).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(a[e])}).join("&")}).then(function(e){return e.json()})}(a,n).then(function(t){var a=0===t.code;e.setState({helperText:a?"Registration successful! Login to continue":t.status})})}},{key:"renderTitle",value:function(){var e=this.props.classes;return r.a.createElement(r.a.Fragment,null,r.a.createElement(w.a,{className:e.avatar},r.a.createElement(O.a,null)),r.a.createElement(x.a,{component:"h1",variant:"h6"},"ITB NIM Finder"),r.a.createElement(x.a,{component:"h2",variant:"h4"},"Register"))}},{key:"renderForm",value:function(){var e=this,t=this.state.helperText,a=this.props.classes;return r.a.createElement(r.a.Fragment,null,r.a.createElement(T.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"username",label:"Username",name:"username",autoComplete:"username",autoFocus:!0,onChange:function(t){e.setState({username:t.target.value})},onKeyPress:function(t){"Enter"===t.key&&(e.handleSubmit(),t.preventDefault())}}),r.a.createElement(T.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:function(t){e.setState({password:t.target.value})},onKeyPress:function(t){"Enter"===t.key&&(e.handleSubmit(),t.preventDefault())},helperText:t}),r.a.createElement(k.a,{type:"submit",fullWidth:!0,variant:"contained",color:"secondary",className:a.submit,onClick:function(){return e.handleSubmit()}},"Register"),r.a.createElement(j.a,{container:!0,direction:"column",alignItems:"center"},r.a.createElement(j.a,{item:!0},r.a.createElement(h.b,{to:"/login"},"Already have an account? Login"))))}},{key:"render",value:function(){var e=this.props,t=e.classes;return(0,e.getToken)()?r.a.createElement(p.a,{to:"/"}):r.a.createElement(I.a,{component:"main",maxWidth:"xs"},r.a.createElement(C.a,null),r.a.createElement("div",{className:t.paper},this.renderTitle(),this.renderForm()),r.a.createElement(P,null))}}]),t}(r.a.Component),U=Object(B.a)(function(e){return{"@global":{body:{backgroundColor:e.palette.common.white}},paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})(D),L=a(86),q=a(170),A=a(157),M=a(162),K=a(166),J=a(165),_=a(163),H=a(164),X=a(158),$=a(167),z=a(87),G=a.n(z);var Q=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(s.a)(this,Object(u.a)(t).call(this))).handleInputChange=function(t){e.setState({query:t.target.value,payload:[{name:"Searching..."}]},e.onChangeDebounced)},e.handlePageChange=function(t,a,n){e.setState({offset:a,page:n,payload:[{name:"Searching..."}]},e.actionSearch)},e.handleCountChange=function(t){e.setState({count:t.target.value},e.actionSearch)},e.actionSearch=function(){var t=e.props,a=t.setToken,n=t.getToken,r=e.state,o=r.query,c=r.count,l=r.page;(isNaN(o)?function(e,t,a,n){var r=new URL(E),o={name:e,count:t,page:a};return r.search=new URLSearchParams(o),fetch(r,{headers:{"Auth-Token":n}}).then(function(e){return e.json()})}(o,c,l,n()):function(e,t,a,n){var r=new URL(b),o={query:e,count:t,page:a};return r.search=new URLSearchParams(o),fetch(r,{headers:{"Auth-Token":n}}).then(function(e){return e.json()})}(o,c,l,n())).then(function(t){var r=t.code>=y;e.setState({payload:r?t.payload.length>y?t.payload:[{name:"Not found!"}]:[{name:t.status}]}),a(r?n():"")})},e.onChangeDebounced=function(){e.actionSearch()},e.state={query:"",count:10,page:0,payload:[],offset:0},e.onChangeDebounced=Object(L.debounce)(e.onChangeDebounced,300),e}return Object(m.a)(t,e),Object(i.a)(t,[{key:"renderNavBar",value:function(){var e=this.props,t=e.setToken,a=e.classes;return r.a.createElement(j.a,{container:!0,className:a.navBar},r.a.createElement(j.a,{item:!0,xs:!0},r.a.createElement(x.a,{component:"h1",variant:"h6"},"ITB NIM Finder")),r.a.createElement(j.a,{item:!0},r.a.createElement(F.a,{href:"#",onClick:function(){t("")},variant:"body2"},"Logout")))}},{key:"renderCountOptions",value:function(){var e=this.props.classes,t=this.state.count;return r.a.createElement(A.a,{className:e.formControl},r.a.createElement(q.a,{htmlFor:"rows"},"Rows per page"),r.a.createElement($.a,{native:!0,value:t,onChange:this.handleCountChange,inputProps:{name:"rows",id:"rows"}},r.a.createElement("option",{value:5},"5"),r.a.createElement("option",{value:10},"10"),r.a.createElement("option",{value:20},"20")))}},{key:"renderSearchField",value:function(){var e=this.props.classes;return r.a.createElement(T.a,{className:e.searchField,variant:"outlined",margin:"normal",fullWidth:!0,label:"Search by name or ID",autoFocus:!0,onChange:this.handleInputChange})}},{key:"renderBottomBar",value:function(){var e=this;return r.a.createElement(j.a,{container:!0,direction:"column",alignItems:"center"},r.a.createElement(j.a,{item:!0},r.a.createElement(G.a,{limit:10,offset:this.state.offset,total:100,onClick:function(t,a,n){e.handlePageChange(t,a,n-1)}})))}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.getToken,n=this.state.payload;return a()?r.a.createElement(I.a,{component:"main",maxWidth:"md"},this.renderNavBar(),this.renderSearchField(),r.a.createElement(X.a,{className:t.root},r.a.createElement(M.a,null,r.a.createElement("colgroup",null,r.a.createElement("col",{width:"30%"}),r.a.createElement("col",{width:"20%"}),r.a.createElement("col",{width:"20%"}),r.a.createElement("col",{width:"30%"})),r.a.createElement(_.a,null,r.a.createElement(H.a,null,r.a.createElement(J.a,null,"Nama"),r.a.createElement(J.a,null,"NIM TPB"),r.a.createElement(J.a,null,"NIM Jurusan"),r.a.createElement(J.a,null,"Prodi"))),r.a.createElement(K.a,null,n.map(function(e){return r.a.createElement(H.a,{key:e.name},r.a.createElement(J.a,{component:"th",scope:"row"},e.name),r.a.createElement(J.a,null,e.nim_tpb),r.a.createElement(J.a,null,e.nim_jur),r.a.createElement(J.a,null,e.prodi))}))),this.renderBottomBar()),r.a.createElement(j.a,{container:!0,alignItems:"flex-start",justify:"flex-end",direction:"row"},this.renderCountOptions())):r.a.createElement(p.a,{to:"/login"})}}]),t}(r.a.Component),V=[{path:"/login",component:W},{path:"/register",component:U},{component:Object(B.a)(function(e){return{root:{width:"100%",marginTop:e.spacing(3),overflowX:"auto"},table:{maxWidth:100},searchField:{marginTop:e.spacing(2)},navBar:{marginTop:e.spacing(3)},formControl:{margin:e.spacing(1),minWidth:120}}})(Q)}],Y=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={token:localStorage.getItem(d)},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"getToken",value:function(){var e=this.state.token;return e||""}},{key:"setToken",value:function(e){this.setState({token:e}),localStorage.setItem(d,e)}},{key:"render",value:function(){var e=this;return r.a.createElement(h.a,{basename:"/react-nim-finder"},r.a.createElement(p.d,null,V.map(function(t,a){return r.a.createElement(p.b,{key:a,path:t.path,render:function(){return r.a.createElement(t.component,{key:a,setToken:function(t){e.setToken(t)},getToken:function(){return e.getToken()}})}})})))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(Y,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},97:function(e,t,a){e.exports=a(119)}},[[97,1,2]]]);
//# sourceMappingURL=main.e7a7534a.chunk.js.map